---
title: CLI
order: -1
category: Framework
---

import Link from "../../../../components/Link.jsx";

# CLI

`react-server` CLIはアプリケーションの開発とデプロイに使うメインツールです。CLI はアプリケーションのビルド、実行、デプロイを助けてくれます。

実行可能なコマンドを見るには次のコマンドを実行してください。

```sh
pnpm react-server --help
```

<Link name="commands">
## コマンド
</Link>

`react-server` CLIの第一引数にはアプリケーションのエントリーポイントを指定する必要があります。ファイルベースルーティングはエントリーポイントを定義してくれるので指定する必要はありません。

- **[root]**: アプリケーションをデベロップメントモードで実行
- **build [root]**: プロダクションモードでビルド
- **start**: プロダクションモードでアプリケーションを実行

`[root]`はReact Server Component をエクスポートしたファイルです。このファイルがエントリーポイントとなりサーバーにリクエストがあるたびにサーバーでレンダリングを行います。

エントリーポイントを特定するためにフラグメントを使うことも出来ます。`./index.jsx`にエントリーポイントがあり、App コンポーネントをエクスポートしたいなら`./index.jsx#App`とすることが出来ます。

<Link name="development-server-options">
## 開発サーバーのオプション
</Link>

もし`./App.jsx`がエントリーポイントなら、次のコマンドで開発サーバーを起動することが出来ます。

```sh
pnpm react-server ./App.jsx
```

開発サーバーを起動するには次のオプションを指定することが出来ます。

**host:** リッスンするホストを指定します。デフォルトでは`localhost`になります。

**port:** リッスンするポートを指定します。デフォルトでは`3000`になります。

**https:** HTTPSプロトコルを有効にする場合に指定します。デフォルトは`false`になります。
もし開発サーバーでHTTPSプロトコルを使う場合、`react-server.config.mjs`または`vite.config.mjs`でHTTPSの設定をする必要があります。詳しくはViteドキュメントの[server.https](https://ja.vite.dev/config/server-options#server-https)を参照してください。

**open:** 開発サーバーの開始でデフォルトブラウザを開くか指定します。デフォルトは`false`です。
デフォルトブラウザでアプリケーションにアクセスします。

**cors:** オリジン間リソース共有の設定します。デフォルトは`false`です。
もしオリジン間リソース共有を有効にする場合に便利です。オリジン間リソース共有の詳細な設定は`react-server.config.mjs`または`vite.config.mjs`で設定することが出来ます。詳しくはViteドキュメントの[server.cors](https://ja.vite.dev/config/server-options#server-cors)を参照してください。

**force:** オプティマイザにキャッシュを無視するか設定します。デフォルトは`false`です。
これは`vite --force`と同じです。キャッシュを無視して再バンドルすることが出来ます。

**watch:** 設定ファイル変更の監視するか指定します。デフォルトは`false`です。
監視を無効にするには`--no-watch`を指定する必要があります。

**clear-screen:** アプリケーションを実行中のターミナルをクリアするか指定します。デフォルトは`false`です。
ターミナルをクリアしてアプリケーションを実行するときに使います。

**no-color:** コンソールでのカラー出力するか指定します。デフォルトは`false`です。
CI/CD環境では便利なオプションです。

**eval:** `node -e`と同じように引数に指定したエントリーポイントを評価します。または標準入力も指定することが出来ます。このエントリーポイントはファイルシステムに書き込んだものではなく仮想的なエントリーポイントです。

**version:** バージョンを表示します。
開発マシンのアーキテクチャ、node バージョンに合わせてreact-serverのバージョンを表示します。

**outDir:** ビルドファイルの出力先を指定します。デフォルトは`.react-server`です。

**name:** サーバー名を指定します。ログに表示します。デフォルトはreact-serverです。

<Link name="build-options">
## ビルドオプション
</Link>

**minify:** ファイルサイズの軽量化をするか指定します。デフォルトは`true`です。
[Todoアプリケーション](https://github.com/lazarv/react-server/tree/main/examples/todo)のようにReact Server Componentのみ使っている場合はファイルサイズを最小化する必要はありません。もしクライアントコンポーネントを最小化する必要がない場合は`--no-minify`をオプションに指定してください。

**sourcemap:** Source Mapを作成するか指定します。デフォルトは`false`です。
詳細はViteドキュメントの[build.sourcemap](https://ja.vite.dev/config/build-options#build-sourcemap)を参照してください。

**no-color:** コンソールでのカラー出力するか指定します。デフォルトは`false`です。
CI/CD環境では便利なオプションです。

**server:** サーバーコンポーネントのビルドを行うか指定します。デフォルトは`true`です。
クライアントコンポーネントだけをビルドしたい場合は、`--no-server`をオプションに指定します。

**client:** クライアントコンポーネントのビルドを行うか指定します。デフォルトは`true`です。
サーバーコンポーネントだけをビルドしたい場合は、`--no-client`をオプションに指定します。

**export:** 静的ファイルのエクスポートをするか指定します。デフォルトは`false`です。
アプリケーションを静的HTMLページでエクスポートすることが出来ます。`react-server.config.mjs`でルーティングを定義してエクスポートすることが出来ます。詳細は[静的生成](/router/static)を参照してください。

**compression:** 圧縮をするか指定します。デフォルトは`false`です。
静的ファイルのビルドを圧縮したい場合、圧縮を有効にすることが出来ます。圧縮はデフォルトでは有効になっていません。圧縮を有効にすると、Gzipまたは、Brotliを使って圧縮することが出来ます。プロダクションモードのサーバーは静的ファイルがある場合は自動的に圧縮します。

**deploy:** アダプターを使ってデプロイするか指定します。デフォルトは`false`です。
`react-server.config.mjs`でアダプターを有効にしており、このオプションをビルドで指定した場合、アダプターはプレビルドを行いアプリケーションをデプロイします。

**eval:** `node -e`と同じように引数に指定したエントリーポイントを評価します。または標準入力も指定することが出来ます。このエントリーポイントはファイルシステムに書き込んだものではなく仮想的なエントリーポイントです。

**outDir:** ビルドファイルの出力先を指定します。デフォルトは`.react-server`です。

<Link name="start-options">
## スタートオプション
</Link>

**host**、**port**、**https**、**cors**は開発サーバーのオプションと同じ内容です。

**origin:** URLのオリジン部分を定数に指定します。環境変数`ORIGIN`を使っても同じ結果になります。

**trust-proxy:** `X-Forwarded-*`ヘッダーを信頼します。

`origin`と`trust-proxy`についてはHattipの[ドキュメント]((https://github.com/hattipjs/hattip/tree/main/packages/adapter/adapter-node#api))を参照してください。

**build:**
プロダクションモードでサーバーを起動する前にビルドを実行します。

**outDir:** ビルドファイルの出力先を指定します。デフォルトは`.react-server`です。もしビルド時にファイルの出力先を変更している場合、このオプションを指定する必要があります。