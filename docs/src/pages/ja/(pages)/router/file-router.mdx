---
title: ファイルシステムベースのルーター
category: Router
order: 2
---

import Link from "../../../../components/Link.jsx";

# ファイルシステムベースのルーター

このフレームワークでは、ファイルシステムベースのルーターを使用してアプリケーションを構築することもできます。このルーターを使用すると、Next.jsなどの他のメタフレームワークと同様に、ファイルシステムベースのルーティング構造を作成できます。

`react-server` CLIを使用する際にアプリケーションのエントリーポイントを指定しない場合、`@lazarv/react-server`は自動的にファイルシステムベースのルーターを使用します。

<Link name="react-server">
## 開発サーバー
</Link>

ファイルシステムベースのルーターを使用して開発サーバーを起動するには、次のコマンドを実行します：

```sh
pnpm react-server
```

<Link name="build">
## ビルド
</Link>

ファイルシステムベースのルーターを使用してアプリケーションをビルドするには：

```sh
pnpm react-server build
```

<Link name="start">
## 起動
</Link>

ビルドされた本番アプリケーションを通常通り起動するには：

```sh
pnpm react-server start
```

<Link name="typed-routes">
## 型付きルート
</Link>

このルーターは標準で型付きルートをサポートしています。TypeScriptを使用する場合、生成された型をプロジェクトに含めることで、すべてのルートが型チェックされます。型付きルートは、`Link`コンポーネント、`useMatch`フック、`useClient`フックからの`navigate`、`replace`、`prefetch`関数、また`ReactServerComponent`で利用できる各種アウトレットを使うときにも適用されます。

生成された型をプロジェクトに含めるには、`.react-server`ディレクトリからの`.ts`ファイルをTypeScript設定に含めるだけです。そのためには、`tsconfig.json`ファイルの`include`配列に`.react-server/**/*.ts`を追加します：

```json
{
  "compilerOptions": {
    // ...
  },
  "include": [/* ... */, ".react-server/**/*.ts"]
}
```

<Link name="nextjs-compatibility">
## Next.jsとの互換性
</Link>

ファイルシステムベースのルーターは、Next.js特有の機能を使っていなければ、Next.jsプロジェクトとそのまま置き換えて使うことができます。つまり、標準的な機能だけを使っている場合は、両方のフレームワーク間でソースコードを移行しやすいのが特徴です。

ファイルシステムベースのルーターは、Next.jsと以下の機能を共有しています：

- [ ] 静的および動的ルート
- [ ] レイアウトとページ
- [ ] ネストされたルート
- [ ] ルートグループ
- [ ] パラレルルート
- [ ] エラー処理
- [ ] ローディング状態

Next.jsタイプのファイルシステムベースのルーターを再現するには、`app`ディレクトリ内のページルートとして`page.tsx`ファイルのみを使用できるようにルーターを設定するか、`src`ディレクトリベースのプロジェクト構造を使用する場合は`root`ディレクトリを`src/app`に変更します。

```json
{
  "root": "app",
  "page": {
    "include": ["**/page.tsx"]
  }
}
```